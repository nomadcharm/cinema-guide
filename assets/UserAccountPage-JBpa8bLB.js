import{u,r as c,A as o,j as s,l}from"./index-C1Q29D2D.js";import{h as _,q as d,u as m,L as x}from"./Layout-EJ3lM0yw.js";import{u as h}from"./useFavorites-DdIdHM67.js";import{F as j}from"./FilmPreviewCard-Bnyjly5s.js";const v=()=>{const t=u(),{currentUser:e,getCurrentUser:r,clearCurrentUser:a}=c.useContext(o);c.useEffect(()=>{r()},[r]);const n=_({mutationFn:()=>l(),onSuccess(){a(),t("/")}},d),i=()=>{n.mutate()};return s.jsx("div",{className:"user",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"user__data",children:[s.jsxs("div",{className:"user__info",children:[s.jsxs("p",{className:"user__initials",children:[e.name.substring(0,1),e.surname.substring(0,1)]}),s.jsxs("div",{children:[s.jsx("p",{className:"user__category",children:"Имя Фамилия"}),s.jsxs("p",{className:"user__details",children:[e.name," ",e.surname]})]})]}),s.jsx("div",{className:"user__info user__info--email",children:s.jsxs("div",{children:[s.jsx("p",{className:"user__category",children:"Электронная почта"}),s.jsx("p",{className:"user__details",children:e.email})]})})]}),s.jsx("button",{className:"button button-primary",onClick:()=>i(),children:"Выйти из аккаунта"})]}):s.jsx("img",{src:"https://media.tenor.com/_BiwWBWhYucAAAAe/what-huh.png",alt:""})})},b=()=>{const[t,e,r]=h();return c.useEffect(()=>{e()},[e]),s.jsx("div",{className:"favorites",children:t?s.jsx("ul",{className:"favorites__list",children:t.map(a=>s.jsxs("li",{className:"favorites__item",children:[s.jsx("button",{className:"favorites__remove-btn",onClick:()=>r(a.id),"aria-label":"Удалить фильм из избранного"}),s.jsx(j,{id:a.id,title:a.title,posterUrl:a.posterUrl})]},a.id))}):null})},C=()=>{m("Мой аккаунт | Cinema Guide");const[t,e]=c.useState(0),r=a=>{e(a)};return s.jsx(x,{children:s.jsx("section",{className:"user-account",children:s.jsxs("div",{className:"container user-account__container",children:[s.jsx("h2",{className:"page-title user-account__title",children:"Мой аккаунт"}),s.jsxs("ul",{className:"user-account__nav",children:[s.jsx("li",{className:"user-account__nav-item",onClick:()=>r(0),children:s.jsx("h3",{className:t===0?"user-account__tab user-account__tab--favourites active":"user-account__tab user-account__tab--favourites",children:"Избранные фильмы"})}),s.jsx("li",{className:"user-account__nav-item",onClick:()=>r(1),children:s.jsx("h3",{className:t===1?"user-account__tab user-account__tab--settings active":"user-account__tab user-account__tab--settings",children:"Настройка аккаунта"})})]}),s.jsx("div",{className:t===0?"user-account__tab-content tab-1 active":"user-account__tab-content tab-1",children:s.jsx(b,{})}),s.jsx("div",{className:t===1?"user-account__tab-content tab-2 active":"user-account__tab-content tab-2",children:s.jsx(v,{})})]})})})};export{C as default};

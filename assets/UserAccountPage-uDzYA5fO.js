import{u as _,r as t,A as d,j as s,l as h}from"./index-y1XSMXpj.js";import{u as x,h as j,L as v,q as N}from"./Layout-CiOWv4yE.js";import{F as p}from"./FilmPreviewCard-zfxYCl3R.js";import{u as g}from"./useFavorites-BJ-H7CBL.js";const U=()=>{x("Мой аккаунт | Cinema Guide");const i=_(),{currentUser:e,getCurrentUser:c,clearCurrentUser:u}=t.useContext(d);t.useEffect(()=>{c()},[c]);const[r,n,o]=g();t.useEffect(()=>{n()},[n]);const l=j({mutationFn:()=>h(),onSuccess(){u(),i("/")}},N),m=()=>{l.mutate()};return s.jsx(v,{children:s.jsx("section",{className:"user-account",children:s.jsxs("div",{className:"container user-account__container",children:[e?s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"page-title user-account__title",children:"Мой аккаунт"}),s.jsxs("ul",{className:"user-account__nav",children:[s.jsx("li",{className:"user-account__nav-item",children:s.jsx("h3",{className:"user-account__tab user-account__tab--favourites",children:"Избранные фильмы"})}),s.jsx("li",{className:"user-account__nav-item",children:s.jsx("h3",{className:"user-account__tab active user-account__tab--settings",children:"Настройка аккаунта"})})]}),s.jsxs("div",{className:"user-account__content",children:[s.jsxs("div",{className:"user-account__info",children:[s.jsxs("p",{className:"user-account__initials",children:[e.name.substring(0,1),e.surname.substring(0,1)]}),s.jsxs("div",{children:[s.jsx("p",{className:"user-account__category",children:"Имя Фамилия"}),s.jsxs("p",{className:"user-account__details",children:[e.name," ",e.surname]})]})]}),s.jsx("div",{className:"user-account__info user-account__info--email",children:s.jsxs("div",{children:[s.jsx("p",{className:"user-account__category",children:"Электронная почта"}),s.jsx("p",{className:"user-account__details",children:e.email})]})})]}),s.jsx("button",{className:"button button-primary",onClick:()=>m(),children:"Выйти из аккаунта"})]}):s.jsx("img",{src:"https://media.tenor.com/_BiwWBWhYucAAAAe/what-huh.png",alt:""}),s.jsx("section",{className:"user-favorites",children:r?s.jsx("ul",{className:"user-favorites__list",children:r.map(a=>s.jsxs("li",{className:"user-favorites__item",children:[s.jsx("button",{className:"user-favorites__remove-btn",onClick:()=>o(a.id),"aria-label":"Удалить фильм из избранного"}),s.jsx(p,{id:a.id,title:a.title,posterUrl:a.posterUrl})]},a.id))}):null})]})})})};export{U as default};

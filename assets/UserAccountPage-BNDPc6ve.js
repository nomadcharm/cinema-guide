import{u as o,r as c,A as u,g as l,l as _,j as s,q as d}from"./index-Bdi-bgfM.js";import{u as m,a as h,L as x}from"./Layout-D7OE2vnA.js";import{u as j}from"./useFavorites-RVI0St0-.js";import{F as v}from"./FilmPreviewCard-CezK0M3c.js";import"./icon-person-CSVaiHAu.js";const b=()=>{const a=o(),{currentUser:e,getCurrentUser:r,clearCurrentUser:t}=c.useContext(u);c.useEffect(()=>{r()},[r]);const n=l({mutationFn:()=>_(),onSuccess(){t(),a("/")}},d),i=()=>{n.mutate()};return s.jsx("div",{className:"user",children:e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"user__data",children:[s.jsxs("div",{className:"user__info",children:[s.jsxs("p",{className:"user__initials",children:[e.name.substring(0,1),e.surname.substring(0,1)]}),s.jsxs("div",{children:[s.jsx("p",{className:"user__category",children:"Имя Фамилия"}),s.jsxs("p",{className:"user__details",children:[e.name," ",e.surname]})]})]}),s.jsx("div",{className:"user__info user__info--email",children:s.jsxs("div",{children:[s.jsx("p",{className:"user__category",children:"Электронная почта"}),s.jsx("p",{className:"user__details",children:e.email})]})})]}),s.jsx("button",{className:"button button-primary",onClick:()=>i(),children:"Выйти из аккаунта"})]}):s.jsx("img",{src:"https://media.tenor.com/_BiwWBWhYucAAAAe/what-huh.png",alt:""})})},N=()=>{const[a,e,r]=j();return c.useEffect(()=>{e()},[e]),s.jsx("div",{className:"favorites",children:a&&a.length>0?s.jsx("ul",{className:"favorites__list",children:a.map(t=>s.jsxs("li",{className:"favorites__item",children:[s.jsx("button",{className:"favorites__remove-btn",onClick:()=>r(t.id),"aria-label":"Удалить фильм из избранного"}),s.jsx(v,{id:t.id,title:t.title,posterUrl:t.posterUrl})]},t.id))}):s.jsx("p",{className:"favorites__empty-list",children:"Добавьте первый фильм в избранное"})})},U=()=>{m("Мой аккаунт | Cinema Guide");const a=h(),[e,r]=c.useState(0),t=n=>{r(n)};return s.jsx(x,{children:s.jsx("section",{className:"user-account",children:s.jsxs("div",{className:"container user-account__container",children:[s.jsx("h2",{className:"page-title user-account__title",children:"Мой аккаунт"}),s.jsxs("ul",{className:"user-account__nav",children:[s.jsx("li",{className:"user-account__nav-item",onClick:()=>t(0),children:s.jsx("h3",{className:e===0?"user-account__tab user-account__tab--favourites active":"user-account__tab user-account__tab--favourites",children:a<=768?"Избранное":"Избранные фильмы"})}),s.jsx("li",{className:"user-account__nav-item",onClick:()=>t(1),children:s.jsx("h3",{className:e===1?"user-account__tab user-account__tab--settings active":"user-account__tab user-account__tab--settings",children:a<=768?"Настройки":"Настройка аккаунта"})})]}),s.jsx("div",{className:e===0?"user-account__tab-content tab-1 active":"user-account__tab-content tab-1",children:s.jsx(N,{})}),s.jsx("div",{className:e===1?"user-account__tab-content tab-2 active":"user-account__tab-content tab-2",children:s.jsx(b,{})})]})})})};export{U as default};
